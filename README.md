# SA Evolution - ALife Journal 2026

This repository contains the code for the SA Evolution project submitted to the ALife Journal 2026.

## Requirements

Install the required packages:
```bash
pip install -r requirements.txt
```

## Files

- `particle.py`: Main simulation code
- `retry.py`: Script to run simulations using saved particle data
- `replay_forgraph.py`: Script to regenerate graphs using saved particle data
- `reconstruction_error_graph.py`: Script to create reconstruction error graphs

## Usage

### 1. Run Main Simulation

Execute the main simulation:
```bash
python particle.py
```

This will generate simulation data in the `saved_particles/alife_journal/` directory and visualization data in the `particle_visualizations/alife_journal/` directory.

### 2. Generate Figure 5 (PCA Visualization)

Create PCA-based trajectory visualization:
```bash
python replay_forgraph.py --data_dir saved_particles/alife_journal --reference_step 120
```

**Parameters:**
- `--data_dir`: Directory containing saved particle data from the main simulation
- `--reference_step`: Iteration step used as reference for PCA dimensionality reduction

This script generates the PCA reducers and axis limits saved in `replay_graphs/reducers_and_axis_limits.pkl`.

### 3. Generate Figure 6 (Reconstruction Error)

Create reconstruction error graphs:
```bash
python reconstruction_error_graph.py --json_file particle_visualizations/alife_journal/reconstruction_errors.json --output_dir reconstruction_error --max_iter 200
```

**Parameters:**
- `--json_file`: Path to the reconstruction errors JSON file generated by the main simulation
- `--output_dir`: Output directory for the reconstruction error graphs
- `--max_iter`: Maximum iteration number to display in the graph

### 4. Generate Figure 7 (Specific Step Visualization)

Visualize a specific iteration step using the same PCA axes:
```bash
python retry.py --file saved_particles/alife_journal/particles_iter_0140.pkl --reducers_file replay_graphs/reducers_and_axis_limits.pkl --output_file retry_140.png
```

**Parameters:**
- `--file`: Path to the saved particle file for a specific iteration step
- `--reducers_file`: Path to the PCA reducers file generated in step 2 (ensures consistent axis alignment)
- `--output_file`: Output filename for the generated visualization

## Workflow Summary

1. Run `particle.py` to generate all simulation data
2. Use `replay_forgraph.py` to create PCA-based visualizations and save the dimensionality reduction parameters
3. Use `reconstruction_error_graph.py` to analyze reconstruction errors over iterations
4. Use `retry.py` to visualize specific iteration steps with consistent PCA axes
